{{extend 'layout.html'}}
{{if not pending_approvals:}}
<h2 class="subtitle">No Pending Requests</h2>
    {{else:}}
<h2 class="subtitle">Requests Pending for your Approval</h2>
    <table id="sortTable" class="tablesorter">
      <thead>
      <tr>
        <th>Type</th>
        <th>User ID</th>
        <th>VM Name</th>
        <th>RAM</th>
        <th>Faculty</th>
        <th>HDD</th>
        <th>vCPUs</th>
        <th>Public IP</th>
        <th>Status</th>
      </tr> 
      </thead>
      <tbody>
      {{for pending_approval in pending_approvals:}}
       <tr>
            <td>{{=pending_approval['request_type']}}</td>
            <td>{{=pending_approval['requester_name']}}</td>
            <td>{{=pending_approval['vm_name']}}</td>
            <td>{{=pending_approval['RAM']}}</td>
            <td>{{=pending_approval['faculty_name']}}</td>
            <td>{{=pending_approval['HDD']}}</td>
            <td>{{=pending_approval['vCPUs']}}</td>
            <td style="text-align:center">
            {{if pending_approval['public_ip']:}}
                    <span class="icon-ok"/>
            {{else:}}        
                    <span class="icon-remove"/>
            {{pass}}
            </td>
            <td>
            	{{if pending_approval['status'] == VM_STATUS_APPROVED:}}
            		Waiting for admin approval
            	{{else:}}
					{{=A('Approve',_href=URL(r=request, f='approve_request', args=[pending_approval['id']]))}}
					&nbsp;|&nbsp;
					{{=A('Reject',_href=URL(r=request, f='reject_request', args=[pending_approval['id']]))}}
            	{{pass}}
            </td>
          </tr>
      {{pass}}
    </tbody>
    </table>
{{pass}}

